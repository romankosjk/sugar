(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f310be2"],{"0619":function(t,n,e){"use strict";e.r(n);var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"setting"},[e("h5",[t._v("Синхронизировать базу")]),e("div",{staticClass:"card"},[e("div",{staticClass:"card-body p-2"},[e("b-alert",{staticClass:"mb-2",attrs:{show:t.dismissCountDown,variant:"warning"},on:{dismissed:function(n){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[e("p",[t._v("Идет загрузка осталось примерно "+t._s(t.dismissCountDown)+" секунд...")]),e("b-progress",{attrs:{variant:"warning",max:t.dismissSecs,value:t.dismissCountDown,height:"4px"}})],1),e("b-alert",{staticClass:"mb-2",attrs:{variant:"success",show:t.isSuccess}},[t._v("Данные перенесены")]),e("b-alert",{staticClass:"mb-2",attrs:{variant:"danger",show:t.isOffline}},[t._v("Подключения до интернета отсутствует, попробуйте позже. ")]),e("b-button",{staticClass:"w-100",attrs:{disabled:0!==t.dismissCountDown,variant:"primary"},on:{click:t.loadProduct}},[t._v(" Загрузить ")])],1)])])},r=[],i=(e("159b"),e("96cf"),e("1da1")),a={name:"Setting",data:function(){return{isSync:!1,isOffline:!1,isSuccess:!1,dismissSecs:3,dismissCountDown:0,product:[],category:[]}},computed:{isOnline:function(){return window.navigator.onLine}},methods:{countDownChanged:function(t){this.dismissCountDown=t},createDBCategory:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$pouch.bulkDocs(t.category,{},"category").then((function(){})).catch((function(t){console.error(t)}));case 2:case"end":return n.stop()}}),n)})))()},createDBProduct:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$pouch.bulkDocs(t.product).then((function(){t.isSync=!1,t.isSuccess=!0,t.dismissCountDown=0})).catch((function(t){console.error(t)}));case 2:case"end":return n.stop()}}),n)})))()},loadProduct:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.dismissCountDown=t.dismissSecs,t.isSync=!0,t.product=[],t.category=[],t.isOnline){n.next=8;break}return t.dismissCountDown=0,t.isOffline=!0,n.abrupt("return");case 8:return n.next=10,t.$firebase.database().ref("category").once("value").then((function(n){n.forEach((function(n){t.category.push(n.val())})),t.createDBCategory()}));case 10:return n.next=12,t.$firebase.database().ref("product").once("value").then((function(n){n.forEach((function(n){t.product.push(n.val())})),t.createDBProduct()}));case 12:case"end":return n.stop()}}),n)})))()}},mounted:function(){}},c=a,o=(e("eabb"),e("2877")),u=Object(o["a"])(c,s,r,!1,null,"32745789",null);n["default"]=u.exports},"7f23":function(t,n,e){},eabb:function(t,n,e){"use strict";e("7f23")}}]);
//# sourceMappingURL=chunk-3f310be2.93967c5e.js.map