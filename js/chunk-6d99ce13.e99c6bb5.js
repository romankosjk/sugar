(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d99ce13"],{"146e":function(t,r,e){},"57b0":function(t,r,e){"use strict";e("146e")},d39b:function(t,r,e){"use strict";e.r(r);var a=function(){var t=this,r=t.$createElement,e=t._self._c||r;return t.product?e("div",{staticClass:"product"},[e("div",{staticClass:"product-title d-flex mb-2"},[e("h4",[t._v(t._s(t.product.title))]),e("button",{staticClass:"btn btn-outline-success ml-auto",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),t.prev(r)}}},[t._v("Назад")])]),e("div",{staticClass:"product-container d-flex mb-4"},[e("div",{staticClass:"product-container__avatar mr-2"},[t.product.image?e("img",{staticClass:"mx-auto",attrs:{src:t.product.image}}):t._e()]),e("div",{staticClass:"product-container__information text-center w-100 mt-auto"},[e("p",{staticClass:"text-center h6 text-primary"},[t._v("На "),e("strong",[t._v(t._s(t.gram))]),t._v(" гр. продукту")]),e("div",{staticClass:"information-items d-flex"},[e("div",{staticClass:"information flex-fill d-flex flex-column"},[e("span",{staticClass:"information__header"},[t._v("БЖ")]),e("span",{staticClass:"information__footer"},[t._v(t._s(t.bxbjCalc(t.bxCalc(t.product.product_b),t.bjCalc(t.product.product_j))))])]),e("div",{staticClass:"information flex-fill d-flex flex-column"},[e("span",{staticClass:"information__header"},[t._v("У")]),e("span",{staticClass:"information__footer"},[t._v(t._s(t.byCalc(t.product.product_y)))])]),e("div",{staticClass:"information flex-fill d-flex flex-column"},[e("span",{staticClass:"information__header"},[t._v("ХЕ")]),e("span",{staticClass:"information__footer"},[t._v(t._s(t.allCalc(t.bxCalc(t.product.product_b),t.bjCalc(t.product.product_j),t.byCalc(t.product.product_y))))])])])])]),e("div",{staticClass:"product-form"},[e("form",{staticClass:"mb-3",on:{submit:t.setProducts}},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"productInput"}},[t._v("Количесво грамм")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.gram,expression:"gram"}],staticClass:"form-control",attrs:{type:"number",id:"productInput",placeholder:"100"},domProps:{value:t.gram},on:{input:function(r){r.target.composing||(t.gram=r.target.value)}}})]),e("button",{staticClass:"btn btn-success w-100",attrs:{type:"submit"}},[t._v("Добавить")])]),e("div",{staticClass:"d-flex"},[e("router-link",{staticClass:"btn btn-primary",attrs:{to:"/edit/"+t.product._id}},[e("b-icon",{attrs:{icon:"arrow-clockwise","aria-hidden":"true"}})],1),e("b-button",{staticClass:"w-100 mx-1",attrs:{variant:"info"},on:{click:t.addDishes}},[t._v(" Создать блюдо ")]),e("b-button",{ref:"button",attrs:{variant:"danger",id:"popover-remove"}},[e("b-icon",{attrs:{icon:"x-circle","aria-hidden":"true"}})],1),e("b-popover",{ref:"popover",attrs:{target:"popover-remove",triggers:"click",show:t.popoverShow,placement:"auto",container:"my-container"},on:{"update:show":function(r){t.popoverShow=r}},scopedSlots:t._u([{key:"title",fn:function(){return[e("b-button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:t.onClose}},[e("span",{staticClass:"d-inline-block",attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v(" Вы уверены что хотите удалить продукт ")]},proxy:!0}],null,!1,93513824)},[e("div",{staticClass:"d-flex"},[e("b-button",{staticClass:"mr-2 w-100",attrs:{size:"sm",variant:"danger"},on:{click:t.onClose}},[t._v("Нет")]),e("b-button",{staticClass:"w-100",attrs:{size:"sm",variant:"primary"},on:{click:t.onOk}},[t._v("Да")])],1)])],1)])]):t._e()},n=[],o=(e("b680"),e("96cf"),e("1da1")),s={name:"Product",data:function(){return{product:null,gram:100,popoverShow:!1}},computed:{url:function(){return this.$route.params.page},isOnline:function(){return window.navigator.onLine},productInfo:function(){return this.$store.state.productInfo},productIds:function(){return this.$store.state.productIds},bx_param:{get:function(){return this.$store.state.option.bx_param}},bj_param:{get:function(){return this.$store.state.option.bj_param}}},methods:{prev:function(){this.$router.back()},calculate:function(t){return parseFloat(t)*this.gram/100},bxCalc:function(t){return(this.calculate(t)*parseFloat(this.bx_param)/12).toFixed(1)},bjCalc:function(t){return(this.calculate(t)*parseFloat(this.bj_param)/12).toFixed(1)},byCalc:function(t){return(this.calculate(t)/12).toFixed(1)},bxbjCalc:function(t,r){return(parseFloat(t)+parseFloat(r)).toFixed(1)},allCalc:function(t,r,e){return(parseFloat(t)+parseFloat(r)+parseFloat(e)).toFixed(1)},getProducts:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$pouch.get(t.url).then((function(r){t.product=r,t.gram=t.product.gram}));case 3:r.next=8;break;case 5:r.prev=5,r.t0=r["catch"](0),console.error(r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},setProducts:function(t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,r.product.gram=r.gram,r.product.is_home=1,e.next=6,r.$pouch.put(r.product);case 6:r.prev(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},addDishes:function(){this.$store.dispatch("setProductDishes",this.product)},removeProductFB:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$firebase.database().ref().child("product/".concat(t.product._id)).remove();case 3:r.next=8;break;case 5:r.prev=5,r.t0=r["catch"](0),console.error(r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},onOk:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$pouch.remove({_id:t.product._id,_rev:t.product._rev}).then((function(){t.isOnline?t.removeProductFB().then((function(){t.$router.back()})):t.$router.back()})).catch((function(t){console.log(t)}));case 3:r.next=8;break;case 5:r.prev=5,r.t0=r["catch"](0),console.error(r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},onClose:function(){this.popoverShow=!1}},mounted:function(){this.getProducts()}},c=s,i=(e("57b0"),e("2877")),u=Object(i["a"])(c,a,n,!1,null,"15f21d3c",null);r["default"]=u.exports}}]);
//# sourceMappingURL=chunk-6d99ce13.e99c6bb5.js.map