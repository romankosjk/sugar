(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f918117"],{"057f":function(t,e,r){var s=r("fc6a"),i=r("241c").f,a={}.toString,n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return i(t)}catch(e){return n.slice()}};t.exports.f=function(t){return n&&"[object Window]"==a.call(t)?o(t):i(s(t))}},"35e8":function(t,e,r){},"4de4":function(t,e,r){"use strict";var s=r("23e7"),i=r("b727").filter,a=r("1dde"),n=a("filter");s({target:"Array",proto:!0,forced:!n},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("a4d3"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("159b");function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},"746f":function(t,e,r){var s=r("428f"),i=r("5135"),a=r("e538"),n=r("9bf2").f;t.exports=function(t){var e=s.Symbol||(s.Symbol={});i(e,t)||n(e,t,{value:a.f(t)})}},a4d3:function(t,e,r){"use strict";var s=r("23e7"),i=r("da84"),a=r("d066"),n=r("c430"),o=r("83ab"),c=r("4930"),l=r("fdbf"),u=r("d039"),f=r("5135"),d=r("e8b5"),h=r("861d"),m=r("825a"),p=r("7b0b"),b=r("fc6a"),v=r("c04e"),_=r("5c6c"),g=r("7c73"),C=r("df75"),y=r("241c"),x=r("057f"),w=r("7418"),j=r("06cf"),O=r("9bf2"),F=r("d1e7"),P=r("9112"),D=r("6eeb"),S=r("5692"),k=r("f772"),$=r("d012"),E=r("90e3"),I=r("b622"),N=r("e538"),R=r("746f"),A=r("d44e"),B=r("69f3"),J=r("b727").forEach,z=k("hidden"),L="Symbol",q="prototype",T=I("toPrimitive"),U=B.set,Q=B.getterFor(L),W=Object[q],G=i.Symbol,H=a("JSON","stringify"),K=j.f,M=O.f,V=x.f,X=F.f,Y=S("symbols"),Z=S("op-symbols"),tt=S("string-to-symbol-registry"),et=S("symbol-to-string-registry"),rt=S("wks"),st=i.QObject,it=!st||!st[q]||!st[q].findChild,at=o&&u((function(){return 7!=g(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(t,e,r){var s=K(W,e);s&&delete W[e],M(t,e,r),s&&t!==W&&M(W,e,s)}:M,nt=function(t,e){var r=Y[t]=g(G[q]);return U(r,{type:L,tag:t,description:e}),o||(r.description=e),r},ot=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof G},ct=function(t,e,r){t===W&&ct(Z,e,r),m(t);var s=v(e,!0);return m(r),f(Y,s)?(r.enumerable?(f(t,z)&&t[z][s]&&(t[z][s]=!1),r=g(r,{enumerable:_(0,!1)})):(f(t,z)||M(t,z,_(1,{})),t[z][s]=!0),at(t,s,r)):M(t,s,r)},lt=function(t,e){m(t);var r=b(e),s=C(r).concat(mt(r));return J(s,(function(e){o&&!ft.call(r,e)||ct(t,e,r[e])})),t},ut=function(t,e){return void 0===e?g(t):lt(g(t),e)},ft=function(t){var e=v(t,!0),r=X.call(this,e);return!(this===W&&f(Y,e)&&!f(Z,e))&&(!(r||!f(this,e)||!f(Y,e)||f(this,z)&&this[z][e])||r)},dt=function(t,e){var r=b(t),s=v(e,!0);if(r!==W||!f(Y,s)||f(Z,s)){var i=K(r,s);return!i||!f(Y,s)||f(r,z)&&r[z][s]||(i.enumerable=!0),i}},ht=function(t){var e=V(b(t)),r=[];return J(e,(function(t){f(Y,t)||f($,t)||r.push(t)})),r},mt=function(t){var e=t===W,r=V(e?Z:b(t)),s=[];return J(r,(function(t){!f(Y,t)||e&&!f(W,t)||s.push(Y[t])})),s};if(c||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=E(t),r=function(t){this===W&&r.call(Z,t),f(this,z)&&f(this[z],e)&&(this[z][e]=!1),at(this,e,_(1,t))};return o&&it&&at(W,e,{configurable:!0,set:r}),nt(e,t)},D(G[q],"toString",(function(){return Q(this).tag})),D(G,"withoutSetter",(function(t){return nt(E(t),t)})),F.f=ft,O.f=ct,j.f=dt,y.f=x.f=ht,w.f=mt,N.f=function(t){return nt(I(t),t)},o&&(M(G[q],"description",{configurable:!0,get:function(){return Q(this).description}}),n||D(W,"propertyIsEnumerable",ft,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:G}),J(C(rt),(function(t){R(t)})),s({target:L,stat:!0,forced:!c},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var r=G(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),s({target:"Object",stat:!0,forced:!c,sham:!o},{create:ut,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:dt}),s({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ht,getOwnPropertySymbols:mt}),s({target:"Object",stat:!0,forced:u((function(){w.f(1)}))},{getOwnPropertySymbols:function(t){return w.f(p(t))}}),H){var pt=!c||u((function(){var t=G();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))}));s({target:"JSON",stat:!0,forced:pt},{stringify:function(t,e,r){var s,i=[t],a=1;while(arguments.length>a)i.push(arguments[a++]);if(s=e,(h(e)||void 0!==t)&&!ot(t))return d(e)||(e=function(t,e){if("function"==typeof s&&(e=s.call(this,t,e)),!ot(e))return e}),i[1]=e,H.apply(null,i)}})}G[q][T]||P(G[q],T,G[q].valueOf),A(G,L),$[z]=!0},cc57:function(t,e,r){"use strict";r("35e8")},dbb4:function(t,e,r){var s=r("23e7"),i=r("83ab"),a=r("56ef"),n=r("fc6a"),o=r("06cf"),c=r("8418");s({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,r,s=n(t),i=o.f,l=a(s),u={},f=0;while(l.length>f)r=i(s,e=l[f++]),void 0!==r&&c(u,e,r);return u}})},e439:function(t,e,r){var s=r("23e7"),i=r("d039"),a=r("fc6a"),n=r("06cf").f,o=r("83ab"),c=i((function(){n(1)})),l=!o||c;s({target:"Object",stat:!0,forced:l,sham:!o},{getOwnPropertyDescriptor:function(t,e){return n(a(t),e)}})},e538:function(t,e,r){var s=r("b622");e.f=s},f310:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dishes"},[r("h3",{staticClass:"d-flex"},[t._v(" За все продукты "),r("strong",{staticClass:"ml-auto text-success"},[t._v(t._s(t.dishes.dishes_portion)+" г.")])]),r("div",{staticClass:"d-flex"},[r("div",{staticClass:"dishes-photo mr-2"},[t.dishes.image?r("img",{staticClass:"img-fluid d-block",attrs:{src:t.dishes.image}}):t._e()]),r("div",{staticClass:"product-information w-100 mb-3 d-flex text-center"},[r("div",{staticClass:"information flex-fill d-flex flex-column"},[r("span",{staticClass:"information__header"},[t._v("БЖ")]),r("span",{staticClass:"information__footer"},[t._v(t._s(t.calcFixed(t.bj_var)))])]),r("div",{staticClass:"information flex-fill d-flex flex-column"},[r("span",{staticClass:"information__header"},[t._v("У")]),r("span",{staticClass:"information__footer"},[t._v(t._s(t.calcFixed(t.y_var)))])]),r("div",{staticClass:"information flex-fill d-flex flex-column"},[r("span",{staticClass:"information__header"},[t._v("ХЕ")]),r("span",{staticClass:"information__footer"},[t._v(t._s(t.calcFixed(t.xe_var)))])])])]),r("form",{on:{submit:t.setDishesPouchDB}},[r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label",attrs:{for:"dishesName"}},[t._v("Название блюда")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.dishes.title,expression:"dishes.title"}],staticClass:"form-control",attrs:{required:"",type:"text",id:"dishesName",placeholder:""},domProps:{value:t.dishes.title},on:{input:function(e){e.target.composing||t.$set(t.dishes,"title",e.target.value)}}})]),r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label",attrs:{for:"dishesAvatar"}},[t._v("Фото")]),r("b-form-file",{ref:"file-input",staticClass:"mb-2",attrs:{required:"","browse-text":"Выбрать",placeholder:"Выбрать картинку",id:"dishesAvatar"},on:{change:t.onChange}})],1),r("div",{staticClass:"mb-3"},[r("b-button",{staticClass:"w-100",attrs:{type:"submit",variant:"primary",disabled:t.isCreated}},[r("b-spinner",{directives:[{name:"show",rawName:"v-show",value:t.isCreated,expression:"isCreated"}],staticStyle:{width:"25px",height:"25px"},attrs:{type:"grow"}}),t._v(" Добавить ")],1)],1)]),r("h3",{staticClass:"d-flex align-items-center"},[t._v(" Входит в блюдо ")]),t.products.length?r("div",{staticClass:"dishes-items"},t._l(t.products,(function(e,s){return r("div",{key:s},[r("div",{staticClass:"d-block dishes-item card text-decoration-none mb-2"},[r("div",{staticClass:"card-body d-flex"},[r("div",{staticClass:"item-avatar mr-2"},[e.image?r("img",{staticClass:"d-block img-fluid mb-1",attrs:{src:e.image}}):t._e(),r("b-button",{staticClass:"w-100 text-center",attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.removeItemsDishes(s)}}},[r("b-icon",{attrs:{icon:"x-circle","aria-hidden":"true"}})],1)],1),r("div",{staticClass:"item-content w-100 d-flex flex-column"},[r("h6",[t._v(t._s(e.title))]),r("div",{staticClass:"mt-auto"},[r("p",{staticClass:"d-flex align-items-center justify-content-end mb-2"},[r("span",{staticClass:"mr-1"},[t._v("на")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.dishes_gram,expression:"item.dishes_gram"}],staticClass:"form-control dishes-gram",attrs:{type:"number"},domProps:{value:e.dishes_gram},on:{change:t.onChangeCalculate,input:function(r){r.target.composing||t.$set(e,"dishes_gram",r.target.value)}}}),r("span",{staticClass:"ml-1"},[t._v("г.")])]),r("div",{staticClass:"item-information d-flex text-center"},[r("div",{staticClass:"item-information__item flex-fill d-flex flex-column"},[r("span",{staticClass:"item-information__header"},[t._v("БЖ")]),r("span",{staticClass:"item-information__footer"},[t._v(t._s(t.bxbjCalc(t.bxCalc(e.product_b,e.dishes_gram),t.bjCalc(e.product_j,e.dishes_gram))))])]),r("div",{staticClass:"item-information__item flex-fill d-flex flex-column"},[r("span",{staticClass:"item-information__header"},[t._v("У")]),r("span",{staticClass:"item-information__footer"},[t._v(t._s(t.byCalc(e.product_y,e.dishes_gram)))])]),r("div",{staticClass:"item-information__item flex-fill d-flex flex-column"},[r("span",{staticClass:"item-information__header"},[t._v("ХЕ")]),r("span",{staticClass:"item-information__footer"},[t._v(t._s(t.allCalc(t.bxCalc(e.product_b,e.dishes_gram),t.bjCalc(e.product_j,e.dishes_gram),t.byCalc(e.product_y,e.dishes_gram))))])])])])])])])])})),0):t._e()])},i=[],a=(r("b680"),r("d3b7"),r("159b"),r("5530")),n=(r("96cf"),r("1da1")),o={name:"DishesNew",data:function(){return{isCreated:!1,bj_var:0,y_var:0,xe_var:0,dishes:{title:"",image:null,itemIds:[],dishes_portion:0,b_var:0,j_var:0,y_var:0}}},computed:{products:function(){return this.$store.state.productInfo},isOnline:function(){return window.navigator.onLine},bx_param:{get:function(){return this.$store.state.option.bx_param}},bj_param:{get:function(){return this.$store.state.option.bj_param}}},methods:{resizeImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return new Promise((function(s){var i=new Image;i.src=t,i.onload=function(){var t=document.createElement("canvas"),a=e,n=r,o=i.width,c=i.height;o>c?o>a&&(c*=a/o,o=a):c>n&&(o*=n/c,c=n),t.width=o,t.height=c;var l=t.getContext("2d");l.drawImage(i,0,0,o,c),s(t.toDataURL())}}))},getBase64:function(t){return new Promise((function(e,r){var s=new FileReader;s.readAsDataURL(t),s.onload=function(){return e(s.result)},s.onerror=function(t){return r("Error: ",t)}}))},calculate:function(t,e){return parseFloat(t)*e/100},bxCalc:function(t,e){return(this.calculate(t,e)*parseFloat(this.bx_param)/12).toFixed(1)},bjCalc:function(t,e){return(this.calculate(t,e)*parseFloat(this.bj_param)/12).toFixed(1)},byCalc:function(t,e){return(this.calculate(t,e)/12).toFixed(1)},bxbjCalc:function(t,e){return(parseFloat(t)+parseFloat(e)).toFixed(1)},allCalc:function(t,e,r){return(parseFloat(t)+parseFloat(e)+parseFloat(r)).toFixed(1)},calcFixed:function(t){return t.toFixed(1)},plusAllCalculate:function(t){var e=this;t.length&&(this.bj_var=0,this.y_var=0,this.xe_var=0,this.dishes.b_var=0,this.dishes.j_var=0,this.dishes.y_var=0,this.dishes.dishes_portion=0,t.forEach((function(t){e.bj_var+=parseFloat(e.bxCalc(t.product_b,t.dishes_gram))+parseFloat(e.bjCalc(t.product_j,t.dishes_gram)),e.y_var+=parseFloat(e.byCalc(t.product_y,t.dishes_gram)),e.xe_var+=parseFloat(e.bxCalc(t.product_b,t.dishes_gram))+parseFloat(e.bjCalc(t.product_j,t.dishes_gram))+parseFloat(e.byCalc(t.product_y,t.dishes_gram)),e.dishes.b_var+=parseFloat(t.product_b),e.dishes.j_var+=parseFloat(t.product_j),e.dishes.y_var+=parseFloat(t.product_y),e.dishes.dishes_portion+=parseInt(t.dishes_gram)})))},removeItemsDishes:function(t){this.$store.dispatch("setProductRemove",t)},reset:function(){this.dishes.title="",this.dishes.image=null,this.$refs["file-input"].reset()},onChange:function(t){var e=this;this.getBase64(t.target.files[0]).then((function(t){e.resizeImage(t).then((function(t){e.dishes.image=t}))}))},onChangeCalculate:function(){this.plusAllCalculate(this.products)},setDishesPouchFB:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$firebase.database().ref().child("dishes/".concat(t)).update(Object(a["a"])({_id:t},e.dishes));case 3:r.next=8;break;case 5:r.prev=5,r.t0=r["catch"](0),console.error(r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},setDishesPouchDB:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.preventDefault(),e.isCreated=!0,r.prev=2,e.products.forEach((function(t){e.dishes.itemIds.push({id:t._id,dishes_gram:t.dishes_gram})})),r.next=6,e.$pouch.post(Object(a["a"])({},e.dishes),{},"dishes").then((function(t){e.isOnline?e.setDishesPouchFB(t.id).then((function(){e.reset(),e.isCreated=!1,e.$store.dispatch("setProductRemoveAll"),e.$router.push({name:"Dishes",params:{id:t.id}})})):(e.reset(),e.isCreated=!1,e.$store.dispatch("setProductRemoveAll"),e.$router.push({name:"Dishes",params:{id:t.id}}))}));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](2),console.error(r.t0);case 11:case"end":return r.stop()}}),r,null,[[2,8]])})))()}},mounted:function(){this.plusAllCalculate(this.products)}},c=o,l=(r("cc57"),r("2877")),u=Object(l["a"])(c,s,i,!1,null,"b54330e6",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-4f918117.c51b40b8.js.map