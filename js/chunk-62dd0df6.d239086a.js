(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62dd0df6"],{"345e":function(e,t,r){"use strict";r("a16d")},a16d:function(e,t,r){},b212:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.categories.length?r("div",{staticClass:"category-items text-center"},[e._l(e.categories,(function(t,n){return r("div",{key:n,staticClass:"d-block card category-items__item text-decoration-none mb-2"},[r("div",{staticClass:"card-body d-flex"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.doc.title,expression:"item.doc.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:""},domProps:{value:t.doc.title},on:{keyup:function(r){return e.saveCategory(t.doc,n)},input:function(r){r.target.composing||e.$set(t.doc,"title",r.target.value)}}}),r("div",{staticClass:"ml-2"},[r("b-button",{ref:"button",refInFor:!0,staticClass:"d-flex align-items-center",attrs:{variant:"danger"},on:{click:function(r){return e.showWarning(t.doc,n)}}},[r("b-icon",{attrs:{icon:"x-circle","aria-hidden":"true"}})],1)],1)])])})),r("b-modal",{attrs:{centered:"","hide-footer":"","hide-header":""},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[r("div",{staticClass:"d-block text-center"},[r("h5",{staticClass:"mb-2"},[e._v("Вы уверены что хотите удалить Категорию")]),r("p",[r("b",[e._v("Важно!!!")]),e._v(" Категория должна быть пуста, иначе все продукты что в ней находятся пропадут!!!")])]),r("div",{staticClass:"d-flex"},[r("b-button",{staticClass:"mr-2 w-100",attrs:{size:"sm",variant:"danger"},on:{click:e.onClose}},[e._v("Нет")]),r("b-button",{staticClass:"w-100",attrs:{size:"sm",variant:"primary"},on:{click:e.removeCategoryLocal}},[e._v("Да")])],1)])],2):e._e()},o=[],a=(r("a434"),r("96cf"),r("1da1")),c={name:"CategoryEdit",data:function(){return{categories:[],modalShow:!1,rev:0,remove:{},removeIndex:0}},computed:{isOnline:function(){return window.navigator.onLine}},methods:{setCategoryPouchFB:function(e,t){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.$firebase.database().ref().child("category/".concat(e)).update({_id:e,title:t});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),console.error(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},getCategories:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$pouch.allDocs({include_docs:!0,attachments:!0},"category").then((function(t){console.log(t.rows),e.categories=t.rows}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},saveCategory:function(e,t){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,!e.title){n.next=4;break}return n.next=4,r.$pouch.put({title:e.title,_id:e._id,_rev:e._rev},{},"category").then((function(n){r.isOnline&&(r.categories[t].doc._rev=n.rev,r.setCategoryPouchFB(n.id,e.title))}));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),console.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},removeProductFB:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$firebase.database().ref().child("product/".concat(e.remove._id)).remove();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},showWarning:function(e,t){this.modalShow=!0,this.remove=e,this.removeIndex=t},removeCategoryLocal:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$pouch.remove({_id:e.remove._id,_rev:e.remove._rev},{},"category").then((function(){e.isOnline&&e.removeProductFB().then((function(){})),e.modalShow=!1,e.categories.splice(e.removeIndex,1)})).catch((function(e){console.log(e)}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},onClose:function(){this.modalShow=!1}},mounted:function(){this.getCategories()}},i=c,s=(r("345e"),r("2877")),u=Object(s["a"])(i,n,o,!1,null,"068929a2",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-62dd0df6.d239086a.js.map